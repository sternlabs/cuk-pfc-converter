Version 4
SHEET 1 2608 680
WIRE 496 -32 304 -32
WIRE 768 -32 576 -32
WIRE -176 80 -304 80
WIRE 128 80 0 80
WIRE 304 80 304 -32
WIRE 304 80 208 80
WIRE 352 80 304 80
WIRE 432 80 352 80
WIRE 592 80 496 80
WIRE 768 80 768 -32
WIRE 768 80 672 80
WIRE 896 80 768 80
WIRE 944 80 896 80
WIRE 1088 80 1008 80
WIRE 1184 80 1088 80
WIRE 0 128 0 80
WIRE 352 128 352 80
WIRE 896 128 896 80
WIRE 1088 128 1088 80
WIRE 1184 128 1184 80
WIRE 256 144 160 144
WIRE 304 144 256 144
WIRE -304 160 -304 80
WIRE -176 160 -176 80
WIRE 160 160 160 144
WIRE -304 288 -304 240
WIRE -176 288 -176 224
WIRE -176 288 -304 288
WIRE 0 288 0 208
WIRE 0 288 -176 288
WIRE 160 288 160 240
WIRE 160 288 0 288
WIRE 304 288 304 192
WIRE 304 288 160 288
WIRE 352 288 352 208
WIRE 352 288 304 288
WIRE 480 288 352 288
WIRE 640 288 480 288
WIRE 896 288 896 192
WIRE 896 288 640 288
WIRE 1088 288 1088 192
WIRE 1088 288 896 288
WIRE 1184 288 1184 208
WIRE 1184 288 1088 288
WIRE 480 368 480 288
WIRE 640 368 640 288
FLAG 480 368 0
FLAG 640 368 0
FLAG 256 144 Vsw
SYMBOL voltage 0 112 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 230
SYMBOL sw 352 224 M180
SYMATTR InstName S1
SYMATTR Value ""
SYMATTR SpiceModel sw1
SYMBOL diode 912 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 944 96 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL ind2 112 64 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMATTR Type ind
SYMATTR SpiceLine Rser=1
SYMBOL cap 1104 192 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value 200µ
SYMATTR SpiceLine Rser=10m
SYMBOL res 1168 112 R0
SYMATTR InstName R1
SYMATTR Value 200
SYMBOL ind 688 64 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L4
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=50m
SYMBOL voltage 160 144 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 100n 100n 100n {onT} {onT+offT})
SYMBOL cap 496 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 3.3µ
SYMATTR SpiceLine Rser=50m
SYMBOL current 496 -32 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -32 40 Invisible 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 0
SYMATTR Value2 AC 1.0
SYMBOL bi2 -304 160 R0
SYMATTR InstName B2
SYMATTR Value I=if(time>0,1,0)
SYMBOL cap -192 160 R0
SYMATTR InstName C1
SYMATTR Value 1
TEXT 344 432 Left 2 !.ac dec 1000 10k 100k
TEXT 584 424 Left 2 !.model sw1 SW(Ron=1m Roff=100Meg Vt=0.5 Vh=-0.4)
TEXT 664 200 Left 2 ;K1 L2 L3 1
TEXT 1248 424 Left 2 !.param f 59k\n.param Dr 1\n.param p_len 1\n.param on_len 1\n.param onT {1/f/2*on_len}\n.param offT {onT/Dr}
TEXT 1336 136 Left 2 !.step param Dr 0.2 2 0.2
TEXT 1336 184 Left 2 !.measure tran i_in rms I(L1) TRIG V(Vsw) VAL=0.5 RISE=1 TARG V(Vsw) VAL=0.5 RISE=2\n.measure tran i_L4_max max I(L4)
